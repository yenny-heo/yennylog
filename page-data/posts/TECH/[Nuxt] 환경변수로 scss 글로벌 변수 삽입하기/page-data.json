{
    "componentChunkName": "component---src-components-templates-post-index-js",
    "path": "/posts/TECH/[Nuxt] 환경변수로 scss 글로벌 변수 삽입하기/",
    "result": {"data":{"markdownRemark":{"html":"<h1 id=\"목표\" style=\"position:relative;\"><a href=\"#%EB%AA%A9%ED%91%9C\" aria-label=\"목표 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>목표</h1>\n<p><code>nuxt.js</code>로 개발 중인 프로젝트가 있다.</p>\n<p>이 프로젝트는 동일한 템플릿에 색상만 다르게 입혀 사용하는 경우가 많았다.</p>\n<p>테마 색상이 변경될 때, 일일이 변경하지 않고 한번에 변경할 수 있도록 색상 변수들을 전역변수화 하고 싶었다.</p>\n<p>단, 색상들을 각각 정의하지 않고 환경변수에 정의한 모든 변수들이 자동으로 등록되기를 원했다.</p>\n<h1 id=\"방법\" style=\"position:relative;\"><a href=\"#%EB%B0%A9%EB%B2%95\" aria-label=\"방법 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>방법</h1>\n<p>구글링을 해보니 <code>node-sass-utils</code> 모듈 사용해서 <a href=\"https://stackoverflow.com/questions/61617011/how-can-i-use-environment-variables-in-node-sass-scss-files\">js를 sass로 변환하는 방법</a>도 있었는데, 별도의 모듈 없이 구현하고 싶어서 다른 방법을 시도해보게 되었다.</p>\n<p><code>scss-loader</code>의 옵션인 <code>additionalData</code>를 사용하여 변수를 주입하는 방법을 시도해보게 되었다.</p>\n<h1 id=\"적용\" style=\"position:relative;\"><a href=\"#%EC%A0%81%EC%9A%A9\" aria-label=\"적용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>적용</h1>\n<p>우선 환경변수에 색상 변수들을 정의했다.</p>\n<pre><code class=\"language-jsx\">// config/commonEnv.js\r\nconst commonEnv = {\r\n\t...\r\n  THEME_COLORS: {\r\n    BACKGROUND_COLOR: '#142314',\r\n    MAIN_COLOR: '#008c38',\r\n    SUB_BACKGROUND_COLOR: '#e2e2e2',\r\n    SUB_COLOR: '#ff7a08',\r\n  },\r\n}\r\n\r\nexport default commonEnv\n</code></pre>\n<p><code>additionalData</code>는 스타일 파일의 앞에 scss 코드를 추가해준다.</p>\n<p>IIFE 함수를 이용하여 scss 코드를 정의해 주었다.</p>\n<pre><code class=\"language-jsx\">//nuxt.config.js\r\nconst environment = process.env.APP_ENV\r\nconst publicConfig = getPublicConfig(environment)\r\n\r\nexport default {\r\n\r\n  // Build Configuration: https://go.nuxtjs.dev/config-build\r\n  build: {\r\n    ...\r\n    loaders: {\r\n      scss: {\r\n        additionalData: (() => {\r\n          const colors = []\r\n          Object.entries(THEME_COLORS).forEach(([name, value]) => {\r\n            colors.push(`$${name}: ${value}; `)\r\n          })\r\n          return colors.join(' ')\r\n        })(),\r\n      },\r\n    },\r\n  },\r\n\r\n  publicRuntimeConfig: {\r\n    ...publicConfig,\r\n  },\r\n}\n</code></pre>\n<p>빌드된 결과물을 확인하면, 스타일 파일 앞에 코드가 추가된 것을 확인할 수 있다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 650px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 4.294478527607362%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAABCAYAAADeko4lAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAPklEQVQI1wXBQRLAMAgDsf7/qyUkYDzpbSs9isbbqJrMxL6sEOdc9i4iDvZHR6G36bdwDtMml5EuPmLWYJkfGABMiutcdcEAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"build_result\"\n        title=\"build_result\"\n        src=\"/static/ec28077eabc588d951143792e99e020f/a6d36/build_result.png\"\n        srcset=\"/static/ec28077eabc588d951143792e99e020f/222b7/build_result.png 163w,\n/static/ec28077eabc588d951143792e99e020f/ff46a/build_result.png 325w,\n/static/ec28077eabc588d951143792e99e020f/a6d36/build_result.png 650w,\n/static/ec28077eabc588d951143792e99e020f/3fe45/build_result.png 699w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>","frontmatter":{"title":"[Nuxt] 환경변수로 scss 글로벌 변수 삽입하기","date":"2022-10-12","tags":["Nuxt"],"type":"TECH"},"tableOfContents":"<ul>\n<li><a href=\"#%EB%AA%A9%ED%91%9C\">목표</a></li>\n<li><a href=\"#%EB%B0%A9%EB%B2%95\">방법</a></li>\n<li><a href=\"#%EC%A0%81%EC%9A%A9\">적용</a></li>\n</ul>"}},"pageContext":{"slug":"/posts/TECH/[Nuxt] 환경변수로 scss 글로벌 변수 삽입하기/"}},
    "staticQueryHashes": ["3649515864","63159454"]}