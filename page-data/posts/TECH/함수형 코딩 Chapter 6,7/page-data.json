{"componentChunkName":"component---src-components-templates-post-index-js","path":"/posts/TECH/함수형 코딩 Chapter 6,7/","result":{"data":{"markdownRemark":{"html":"<h1 id=\"chapter-6\" style=\"position:relative;\"><a href=\"#chapter-6\" aria-label=\"chapter 6 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Chapter 6</h1>\n<h2 id=\"챕터-요약\" style=\"position:relative;\"><a href=\"#%EC%B1%95%ED%84%B0-%EC%9A%94%EC%95%BD\" aria-label=\"챕터 요약 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>챕터 요약</h2>\n<ul>\n<li>Copy-On-Write는 데이터를 불변형으로 유지할 수 있게 해준다.</li>\n<li>Copy-On-Write는 값을 변경하기 전 얕은 복사를 한다.</li>\n</ul>\n<h2 id=\"동작을-읽기-쓰기로-구분하기\" style=\"position:relative;\"><a href=\"#%EB%8F%99%EC%9E%91%EC%9D%84-%EC%9D%BD%EA%B8%B0-%EC%93%B0%EA%B8%B0%EB%A1%9C-%EA%B5%AC%EB%B6%84%ED%95%98%EA%B8%B0\" aria-label=\"동작을 읽기 쓰기로 구분하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>동작을 읽기, 쓰기로 구분하기</h2>\n<ul>\n<li>읽기 ⇒ 데이터를 바꾸지 않음</li>\n<li>쓰기 ⇒ 데이터가 변경됨. <strong>불변성 원칙</strong>에 따라 구현해야함 (Copy-On-Write)</li>\n</ul>\n<p>Copy-On-Write 원칙 3단계</p>\n<ol>\n<li>복사본 만들기</li>\n<li>복사본 변경하기</li>\n<li>복사본 리턴하기</li>\n</ol>\n<p>예시) 장바구니에서 아이템 삭제</p>\n<deckgo-highlight-code language=\"jsx\"  >\n          <code slot=\"code\">function remove_item_by_name(cart, name) {\r\n  const new_cart = cart.slice(); // 1) 복사본 만들기\r\n  let idx = null;\r\n  new_cart.forEach((item, index) =&gt; {\r\n    if (item.name === name) {\r\n      idx = index;\r\n    }\r\n  });\r\n  if (idx !== null) {\r\n    new_cart.splice(idx, 1); // 2) 복사본 변경하기\r\n  }\r\n  return new_cart; // 3) 복사본 리턴하기\r\n}</code>\n        </deckgo-highlight-code>\n<p>마찬가지로 splice 동작을 <strong>재사용</strong>할 수 있도록 분리할 수 있다.</p>\n<deckgo-highlight-code language=\"jsx\"  >\n          <code slot=\"code\">function removeItems(array, idx, count) {\r\n  const copy = array.slice();\r\n  copy.splice(idx, count);\r\n  return copy;\r\n}\r\n\r\nfunction remove_item_by_name(cart, name) {\r\n  let idx = null;\r\n  cart.forEach((item, index) =&gt; {\r\n    if (item.name === name) {\r\n      idx = index;\r\n    }\r\n  });\r\n  if (idx !== null) {\r\n    return removeItems(cart, idx, 1); // 2) 복사본 변경하기\r\n  }\r\n  return cart;\r\n}</code>\n        </deckgo-highlight-code>\n<p>js배열 메소드들…</p>\n<p>length, push, pop, unshift, shift, slice, splice 등등</p>\n<p>여담) js 배열은 배열의 동작을 흉내낸 객체.</p>\n<ul>\n<li>배열 요소의 각각의 메모리 공간이 달라도 됨</li>\n<li>연속적으로 이어져있지 않아도 됨.</li>\n</ul>\n<h2 id=\"쓰면서-읽는-함수-copy-on-write-적용하기\" style=\"position:relative;\"><a href=\"#%EC%93%B0%EB%A9%B4%EC%84%9C-%EC%9D%BD%EB%8A%94-%ED%95%A8%EC%88%98-copy-on-write-%EC%A0%81%EC%9A%A9%ED%95%98%EA%B8%B0\" aria-label=\"쓰면서 읽는 함수 copy on write 적용하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>쓰면서 읽는 함수 Copy-On-Write 적용하기</h2>\n<p>shift()</p>\n<ul>\n<li>쓰기: 맨 앞 요소 삭제</li>\n<li>읽기: 맨 앞 요소 리턴</li>\n</ul>\n<ol>\n<li>읽기와 쓰기 동작으로 분리하는 방법</li>\n</ol>\n<p>읽기</p>\n<deckgo-highlight-code language=\"jsx\"  >\n          <code slot=\"code\">function first_element(array) {\r\n  return array[0];\r\n}</code>\n        </deckgo-highlight-code>\n<ol>\n<li>함수에서 두 개 값 리턴하는 방법</li>\n</ol>\n<deckgo-highlight-code language=\"jsx\"  >\n          <code slot=\"code\">function shift(array) {\r\n  const array_copy = array.slice();\r\n  var first = array_copy.shift();\r\n  return {\r\n    first,\r\n    array: array_copy,\r\n  };\r\n}</code>\n        </deckgo-highlight-code>\n<ol>\n<li>불변 데이터 구조를 읽는 것 ⇒ 계산</li>\n<li>변경 가능한 데이터를 읽는 것 ⇒ 액션</li>\n<li>쓰기는 데이터를 변경 가능한 구조로 만듦</li>\n<li>데이터에 쓰기가 없다면, 변경 불가능한 데이터</li>\n<li>쓰기를 읽기로 바꾸면 계산이 많아짐</li>\n</ol>\n<p>그럼 모든 데이터가 불변형이 된다면, <strong>변하는 상태</strong>는 어떻게 다뤄야 할까?</p>\n<p>⇒ <strong>교체</strong>를 통해 바꾼다.</p>\n<p>shopping_cart = add_item(shopping_cart, shoes);</p>\n<ol start=\"3\">\n<li>쓰기 2. 바꾸기 1. 읽기</li>\n</ol>\n<h2 id=\"불변-데이터-구조\" style=\"position:relative;\"><a href=\"#%EB%B6%88%EB%B3%80-%EB%8D%B0%EC%9D%B4%ED%84%B0-%EA%B5%AC%EC%A1%B0\" aria-label=\"불변 데이터 구조 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>불변 데이터 구조</h2>\n<p>⇒ 일반적으로 변경 가능한 데이터 구조보다 메모리를 더 많이 쓰고 느림.</p>\n<ol>\n<li>언제든 최적화 가능</li>\n<li>가비지 콜렉터는 매우 빠름</li>\n<li>생각보다 많이 복사하지 않음 ⇒ 얕은 복사를 사용해 데이터의 최상위 단계만 복사</li>\n<li>어떤 함수형 프로그래밍 언어에서는 불변 데이터 구조 지원 ⇒ Clojure에서는 Copy-On-Write 지원</li>\n</ol>\n<h2 id=\"객체-복사하기\" style=\"position:relative;\"><a href=\"#%EA%B0%9D%EC%B2%B4-%EB%B3%B5%EC%82%AC%ED%95%98%EA%B8%B0\" aria-label=\"객체 복사하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>객체 복사하기</h2>\n<deckgo-highlight-code language=\"jsx\"  >\n          <code slot=\"code\">const object_copy = Object.assign({}, object);</code>\n        </deckgo-highlight-code>\n<p>위 복사를 활용하여 배열과 마찬가지로 Copy-On-Write 를 적용할 수 있다.</p>\n<h2 id=\"중첩된-쓰기-copy-on-write-적용하기\" style=\"position:relative;\"><a href=\"#%EC%A4%91%EC%B2%A9%EB%90%9C-%EC%93%B0%EA%B8%B0-copy-on-write-%EC%A0%81%EC%9A%A9%ED%95%98%EA%B8%B0\" aria-label=\"중첩된 쓰기 copy on write 적용하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>중첩된 쓰기 Copy-On-Write 적용하기</h2>\n<deckgo-highlight-code language=\"jsx\"  >\n          <code slot=\"code\">function setPriceByName(cart, name, price) {\r\n\tconst cartCopy = cart.slice(); // 배열 복사\r\n\tcartCopy.forEach((item) =&gt; {\r\n\t\t(item.name === name) {\r\n\t\t\titem = setPrice(item, price);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction setPrice(item, new_price) {\r\n\tlet item_copy = Object.assign({}, item); // 객체 복사\r\n\titem_copy.price = new_price;\r\n\treturn item_copy;\r\n}</code>\n        </deckgo-highlight-code>\n<p>복사본은 배열 하나, 객체 하나</p>\n<p>⇒ 중첩된 데이터에 <strong>얕은 복사</strong>를 함으로써, <strong>구조적 공유</strong>가 되었음</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 650px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 28.22085889570552%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAGABQDASIAAhEBAxEB/8QAFwABAAMAAAAAAAAAAAAAAAAAAAEEBf/EABUBAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAHRpkQF/8QAFxAAAwEAAAAAAAAAAAAAAAAAAAEDMv/aAAgBAQABBQIppM//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAUEAEAAAAAAAAAAAAAAAAAAAAQ/9oACAEBAAY/An//xAAXEAEBAQEAAAAAAAAAAAAAAAABABFB/9oACAEBAAE/IVyT3YF//9oADAMBAAIAAwAAABD4D//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EABkQAAMAAwAAAAAAAAAAAAAAAAABESExkf/aAAgBAQABPxBzJXhQy0Mgf//Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"copy.jpeg\"\n        title=\"copy.jpeg\"\n        src=\"/static/cb7c56f924a2955d0fa6f7894c2f5c9d/6aca1/shallow_copy.jpg\"\n        srcset=\"/static/cb7c56f924a2955d0fa6f7894c2f5c9d/d2f63/shallow_copy.jpg 163w,\n/static/cb7c56f924a2955d0fa6f7894c2f5c9d/c989d/shallow_copy.jpg 325w,\n/static/cb7c56f924a2955d0fa6f7894c2f5c9d/6aca1/shallow_copy.jpg 650w,\n/static/cb7c56f924a2955d0fa6f7894c2f5c9d/7c09c/shallow_copy.jpg 975w,\n/static/cb7c56f924a2955d0fa6f7894c2f5c9d/01ab0/shallow_copy.jpg 1300w,\n/static/cb7c56f924a2955d0fa6f7894c2f5c9d/71189/shallow_copy.jpg 3913w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<ol>\n<li>배열 복사 ⇒ 배열을 복사해도, 내부의 객체는 기존 값을 <strong>참조</strong>하고 있음</li>\n<li>객체 복사 ⇒ 해당 객체만 복제</li>\n</ol>\n<p>⇒ <strong>구조적 공유</strong>: 두 중첩된 데이터 구조에서, 안쪽 데이터가 같은 데이터를 참조</p>\n<h1 id=\"chapter-7\" style=\"position:relative;\"><a href=\"#chapter-7\" aria-label=\"chapter 7 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Chapter 7</h1>\n<h2 id=\"챕터-요약-1\" style=\"position:relative;\"><a href=\"#%EC%B1%95%ED%84%B0-%EC%9A%94%EC%95%BD-1\" aria-label=\"챕터 요약 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>챕터 요약</h2>\n<ul>\n<li>방어적 복사는 데이터가 들어오고 나갈 때 복사본을 만들어 불변성을 구현한다.</li>\n<li>방어적 복사는 깊은 복사를 한다.</li>\n</ul>\n<h2 id=\"방어적-복사란\" style=\"position:relative;\"><a href=\"#%EB%B0%A9%EC%96%B4%EC%A0%81-%EB%B3%B5%EC%82%AC%EB%9E%80\" aria-label=\"방어적 복사란 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>방어적 복사란?</h2>\n<p>⇒ <strong>불변성이 지켜지지 않는 코드</strong>(ex. 레거시코드)에 데이터를 <strong>전달하기 전/후에 깊은 복사</strong>를 통해서 <strong>원본이 바뀌지 않도록</strong> 막아주는 것</p>\n<h2 id=\"방어적-복사-규칙\" style=\"position:relative;\"><a href=\"#%EB%B0%A9%EC%96%B4%EC%A0%81-%EB%B3%B5%EC%82%AC-%EA%B7%9C%EC%B9%99\" aria-label=\"방어적 복사 규칙 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>방어적 복사 규칙</h2>\n<ol>\n<li>데이터가 안전한 코드에서 <strong>나갈 때</strong> 복사하기\n<ol>\n<li>불변성 데이터를 위한 <strong>깊은 복사</strong>본 만들기</li>\n<li>신뢰할 수 없는 코드로 전달</li>\n</ol>\n</li>\n<li>안전한 코드로 데이터가 <strong>들어올 때</strong> 복사하기\n<ol>\n<li>변경될 수 있는 데이터가 전달되면, <strong>깊은 복사</strong>본을 만들어 안전한 코드로 전달</li>\n<li>복사본을 안전한 코드에서 사용</li>\n</ol>\n</li>\n</ol>\n<h2 id=\"익숙한-방어적-복사\" style=\"position:relative;\"><a href=\"#%EC%9D%B5%EC%88%99%ED%95%9C-%EB%B0%A9%EC%96%B4%EC%A0%81-%EB%B3%B5%EC%82%AC\" aria-label=\"익숙한 방어적 복사 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>익숙한 방어적 복사</h2>\n<p>예시) 웹 API: JSON 데이터 (깊은 복사본) ⇒ API 요청 ⇒ JSON 응답 (깊은 복사본)</p>\n<p>⇒ 웹 API는 <strong>방어적 복사</strong>를 한다.</p>\n<h2 id=\"copy-on-write와-비교\" style=\"position:relative;\"><a href=\"#copy-on-write%EC%99%80-%EB%B9%84%EA%B5%90\" aria-label=\"copy on write와 비교 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Copy-On-Write와 비교</h2>\n<table>\n<thead>\n<tr>\n<th></th>\n<th>Copy-On-Write</th>\n<th>Depensive Copy</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>언제 사용?</td>\n<td>통제할 수 있는 데이터를 바꿀 때</td>\n<td>신뢰할 수 없는 코드와 데이터를 주고 받을 때</td>\n</tr>\n<tr>\n<td>어디서 사용?</td>\n<td>안전지대 어디서나</td>\n<td>안전지대의 경계</td>\n</tr>\n<tr>\n<td>복사 방식</td>\n<td>얕은 복사 (비용 ⬇️)</td>\n<td>깊은 복사 (비용 ⬆️)</td>\n</tr>\n<tr>\n<td>규칙</td>\n<td>1. 바꿀 데이터의 얕은 복사 <br/> 2. 복사본 변경<br/> 3. 복사본 리턴</td>\n<td>1. 안전지대로 들어오는 데이터 깊은 복사 <br/> 2. 안전지대에서 나가는 데이터 깊은 복사</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"깊은-복사는-얕은-복사보다-비싸다\" style=\"position:relative;\"><a href=\"#%EA%B9%8A%EC%9D%80-%EB%B3%B5%EC%82%AC%EB%8A%94-%EC%96%95%EC%9D%80-%EB%B3%B5%EC%82%AC%EB%B3%B4%EB%8B%A4-%EB%B9%84%EC%8B%B8%EB%8B%A4\" aria-label=\"깊은 복사는 얕은 복사보다 비싸다 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>깊은 복사는 얕은 복사보다 비싸다</h2>\n<ul>\n<li>얕은 복사: 바뀌는 데이터만 복사 ⇒ 바뀌지 않은 데이터는 구조적 공유가 됨.</li>\n<li>깊은 복사: 모든 데이터를 복사 ⇒ 원본 데이터와 어떤 데이터 구조도 공유하지 않음.</li>\n</ul>\n<p>하지만 JS에서 깊은 복사를 구현하는 것은 어렵다.</p>\n<p>⇒ lodash 라이브러리에 <code>.cloneDeep()</code> 함수를 쓰는 것을 추천</p>\n<p>구현 방법: 불변형인 string, number, boolean, function을 제외하고 모든 항목을 <strong>재귀적</strong>으로 돌면서 복사.</p>","frontmatter":{"title":"[함수형 코딩] Chapter 6, 7","date":"2023-04-24","tags":["Functional Programming"],"type":"TECH"},"tableOfContents":"<ul>\n<li>\n<p><a href=\"#chapter-6\">Chapter 6</a></p>\n<ul>\n<li><a href=\"#%EC%B1%95%ED%84%B0-%EC%9A%94%EC%95%BD\">챕터 요약</a></li>\n<li><a href=\"#%EB%8F%99%EC%9E%91%EC%9D%84-%EC%9D%BD%EA%B8%B0-%EC%93%B0%EA%B8%B0%EB%A1%9C-%EA%B5%AC%EB%B6%84%ED%95%98%EA%B8%B0\">동작을 읽기, 쓰기로 구분하기</a></li>\n<li><a href=\"#%EC%93%B0%EB%A9%B4%EC%84%9C-%EC%9D%BD%EB%8A%94-%ED%95%A8%EC%88%98-copy-on-write-%EC%A0%81%EC%9A%A9%ED%95%98%EA%B8%B0\">쓰면서 읽는 함수 Copy-On-Write 적용하기</a></li>\n<li><a href=\"#%EB%B6%88%EB%B3%80-%EB%8D%B0%EC%9D%B4%ED%84%B0-%EA%B5%AC%EC%A1%B0\">불변 데이터 구조</a></li>\n<li><a href=\"#%EA%B0%9D%EC%B2%B4-%EB%B3%B5%EC%82%AC%ED%95%98%EA%B8%B0\">객체 복사하기</a></li>\n<li><a href=\"#%EC%A4%91%EC%B2%A9%EB%90%9C-%EC%93%B0%EA%B8%B0-copy-on-write-%EC%A0%81%EC%9A%A9%ED%95%98%EA%B8%B0\">중첩된 쓰기 Copy-On-Write 적용하기</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#chapter-7\">Chapter 7</a></p>\n<ul>\n<li><a href=\"#%EC%B1%95%ED%84%B0-%EC%9A%94%EC%95%BD-1\">챕터 요약</a></li>\n<li><a href=\"#%EB%B0%A9%EC%96%B4%EC%A0%81-%EB%B3%B5%EC%82%AC%EB%9E%80\">방어적 복사란?</a></li>\n<li><a href=\"#%EB%B0%A9%EC%96%B4%EC%A0%81-%EB%B3%B5%EC%82%AC-%EA%B7%9C%EC%B9%99\">방어적 복사 규칙</a></li>\n<li><a href=\"#%EC%9D%B5%EC%88%99%ED%95%9C-%EB%B0%A9%EC%96%B4%EC%A0%81-%EB%B3%B5%EC%82%AC\">익숙한 방어적 복사</a></li>\n<li><a href=\"#copy-on-write%EC%99%80-%EB%B9%84%EA%B5%90\">Copy-On-Write와 비교</a></li>\n<li><a href=\"#%EA%B9%8A%EC%9D%80-%EB%B3%B5%EC%82%AC%EB%8A%94-%EC%96%95%EC%9D%80-%EB%B3%B5%EC%82%AC%EB%B3%B4%EB%8B%A4-%EB%B9%84%EC%8B%B8%EB%8B%A4\">깊은 복사는 얕은 복사보다 비싸다</a></li>\n</ul>\n</li>\n</ul>"}},"pageContext":{"slug":"/posts/TECH/함수형 코딩 Chapter 6,7/"}},"staticQueryHashes":["3649515864","63159454"]}